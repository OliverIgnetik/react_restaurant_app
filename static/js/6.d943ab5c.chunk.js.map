{"version":3,"sources":["components/Order/Order.module.css","components/Order/Order.js","containers/Orders/Orders.js","components/UI/Spinner/Spinner.js","components/UI/Spinner/Spinner.module.css","components/UI/Modal/Modal.js","hoc/withErrorHandler/withErrorHandler.js","components/UI/Modal/Modal.module.css"],"names":["module","exports","order","props","ingredients","ingredientName","push","name","amount","ingredientOutput","map","ig","key","className","classes","Ingredient","Order","Number","parseFloat","price","toFixed","Orders","this","onFetchOrders","token","userId","orders","Spinner","loading","id","Component","connect","state","auth","dispatch","actions","withErrorHandler","axiosOrders","spinner","Loader","Modal","nextProps","nextState","show","children","clicked","modalClosed","style","transform","opacity","React","WrappedComponent","errorConfirmedHandler","setState","error","requestInterceptor","interceptors","request","use","req","responseInterceptor","response","res","eject","message"],"mappings":"2GACAA,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,WAAa,4B,8HC2B7CC,EAzBD,SAAAC,GACZ,IAAMC,EAAc,GAEpB,IAAK,IAAIC,KAAkBF,EAAMC,YAC/BA,EAAYE,KAAK,CACfC,KAAMF,EACNG,OAAQL,EAAMC,YAAYC,KAI9B,IAAMI,EAAmBL,EAAYM,KAAI,SAAAC,GAAE,OACzC,0BAAMC,IAAKD,EAAGJ,KAAMM,UAAWC,IAAQC,YACpCJ,EAAGJ,KADN,KACcI,EAAGH,OADjB,QAIF,OACE,yBAAKK,UAAWC,IAAQE,OACtB,4CAAkBP,GAClB,sCACU,uCAAaQ,OAAOC,WAAWf,EAAMgB,OAAOC,QAAQ,O,gCCd9DC,E,4LAEFC,KAAKnB,MAAMoB,cAAcD,KAAKnB,MAAMqB,MAAOF,KAAKnB,MAAMsB,U,+BAItD,IAAIC,EAAS,kBAACC,EAAA,EAAD,MAcb,OAbKL,KAAKnB,MAAMyB,UACdF,EACE,6BACGJ,KAAKnB,MAAMuB,OAAOhB,KAAI,SAAAR,GAAK,OAC1B,kBAACc,EAAD,CACEJ,IAAKV,EAAM2B,GACXzB,YAAaF,EAAME,YACnBe,MAAOjB,EAAMiB,aAMhBO,M,GApBUI,aAuCNC,uBAfS,SAAAC,GACtB,MAAO,CACLN,OAAQM,EAAM9B,MAAMwB,OACpBE,QAASI,EAAM9B,MAAM0B,QACrBJ,MAAOQ,EAAMC,KAAKT,MAClBC,OAAQO,EAAMC,KAAKR,WAGI,SAAAS,GACzB,MAAO,CACLX,cAAe,SAACC,EAAOC,GAAR,OACbS,EAASC,IAAoBX,EAAOC,QAI3BM,CAGbK,YAAiBf,EAAQgB,O,gCClD3B,qCAOeC,IAJC,WACd,OAAO,yBAAKzB,UAAWC,IAAQyB,QAAxB,e,mBCHTvC,EAAOC,QAAU,CAAC,OAAS,wBAAwB,MAAQ,yB,6HCKrDuC,E,8LAGkBC,EAAWC,GAC/B,OACED,EAAUE,OAASrB,KAAKnB,MAAMwC,MAC9BF,EAAUG,WAAatB,KAAKnB,MAAMyC,W,+BAIpC,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAUD,KAAMrB,KAAKnB,MAAMwC,KAAME,QAASvB,KAAKnB,MAAM2C,cACrD,yBACEjC,UAAWC,IAAQ0B,MACnBO,MAAO,CACLC,UAAW1B,KAAKnB,MAAMwC,KAAO,gBAAkB,qBAC/CM,QAAS3B,KAAKnB,MAAMwC,KAAO,IAAM,MAElCrB,KAAKnB,MAAMyC,e,GAnBFM,IAAMpB,WAgCXU,O,4GCwBAJ,IA1DU,SAACe,EAAkBd,GAE1C,mBACE,WAAYlC,GAAQ,IAAD,8BACjB,4CAAMA,KAmCRiD,sBAAwB,WACtB,EAAKC,SAAS,CAAEC,MAAO,QAnCvB,EAAKtB,MAAQ,CACXsB,MAAO,MAIT,EAAKC,mBAAqBlB,EAAYmB,aAAaC,QAAQC,KAAI,SAAAC,GAK7D,OADA,EAAKN,SAAS,CAAEC,MAAO,OAChBK,KAET,EAAKC,oBAAsBvB,EAAYmB,aAAaK,SAASH,KAC3D,SAAAI,GAIE,OAAOA,KAET,SAAAR,GAIE,EAAKD,SAAS,CAAEC,MAAOA,OAzBV,EADrB,oFAiCIjB,EAAYmB,aAAaC,QAAQM,MAAMzC,KAAKiC,oBAC5ClB,EAAYmB,aAAaK,SAASE,MAAMzC,KAAKsC,uBAlCjD,+BA0CI,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEjB,KAA2B,OAArBrB,KAAKU,MAAMsB,MACjBR,YAAaxB,KAAK8B,uBACjB9B,KAAKU,MAAMsB,MAAQhC,KAAKU,MAAMsB,MAAMU,QAAU,MAEjD,kBAACb,EAAqB7B,KAAKnB,YAjDnC,GAAqB2B,e,mBCLvB9B,EAAOC,QAAU,CAAC,MAAQ","file":"static/js/6.d943ab5c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Order\":\"Order_Order__2j7eF\",\"Ingredient\":\"Order_Ingredient__3f4Au\"};","import React from 'react';\r\nimport classes from './Order.module.css';\r\n\r\nconst order = props => {\r\n  const ingredients = [];\r\n\r\n  for (let ingredientName in props.ingredients) {\r\n    ingredients.push({\r\n      name: ingredientName,\r\n      amount: props.ingredients[ingredientName],\r\n    });\r\n  }\r\n\r\n  const ingredientOutput = ingredients.map(ig => (\r\n    <span key={ig.name} className={classes.Ingredient}>\r\n      {ig.name} ({ig.amount})\r\n    </span>\r\n  ));\r\n  return (\r\n    <div className={classes.Order}>\r\n      <p>Ingredients : {ingredientOutput}</p>\r\n      <p>\r\n        Price : <strong>AUD {Number.parseFloat(props.price).toFixed(2)}</strong>\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default order;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Order from '../../components/Order/Order';\r\nimport axiosOrders from '../../axios-orders';\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport * as actions from '../../store/actions/index';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\n\r\nclass Orders extends Component {\r\n  componentDidMount() {\r\n    this.props.onFetchOrders(this.props.token, this.props.userId);\r\n  }\r\n\r\n  render() {\r\n    let orders = <Spinner />;\r\n    if (!this.props.loading) {\r\n      orders = (\r\n        <div>\r\n          {this.props.orders.map(order => (\r\n            <Order\r\n              key={order.id}\r\n              ingredients={order.ingredients}\r\n              price={order.price}\r\n            />\r\n          ))}\r\n        </div>\r\n      );\r\n    }\r\n    return orders;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    orders: state.order.orders,\r\n    loading: state.order.loading,\r\n    token: state.auth.token,\r\n    userId: state.auth.userId,\r\n  };\r\n};\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onFetchOrders: (token, userId) =>\r\n      dispatch(actions.fetchOrders(token, userId)),\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(withErrorHandler(Orders, axiosOrders));\r\n","import React from 'react';\r\nimport classes from './Spinner.module.css';\r\n\r\nconst spinner = () => {\r\n  return <div className={classes.Loader}>Loading..</div>;\r\n};\r\n\r\nexport default spinner;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Spinner_Loader__3lUvp\",\"load2\":\"Spinner_load2__2Ao1I\"};","import React from 'react';\r\nimport classes from './Modal.module.css';\r\nimport Hocaux from '../../../hoc/HOCAUX';\r\nimport Backdrop from '../Backdrop/Backdrop';\r\nimport propTypes from 'prop-types';\r\n\r\nclass Modal extends React.Component {\r\n  // only render the order summary in the virtual DOM if\r\n  // the modal is shown or the order summary changes\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return (\r\n      nextProps.show !== this.props.show ||\r\n      nextProps.children !== this.props.children\r\n    );\r\n  }\r\n  render() {\r\n    return (\r\n      <Hocaux>\r\n        <Backdrop show={this.props.show} clicked={this.props.modalClosed} />\r\n        <div\r\n          className={classes.Modal}\r\n          style={{\r\n            transform: this.props.show ? 'translateY(0)' : 'translateY(-100vh)',\r\n            opacity: this.props.show ? '1' : '0',\r\n          }}>\r\n          {this.props.children}\r\n        </div>\r\n      </Hocaux>\r\n    );\r\n  }\r\n}\r\n\r\n// prop type validation\r\nModal.propTypes = {\r\n  modalClosed: propTypes.func,\r\n  show: propTypes.bool,\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\nimport Hocaux from '../HOCAUX';\r\n\r\nconst withErrorHandler = (WrappedComponent, axiosOrders) => {\r\n  // anonymous class\r\n  return class extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        error: null,\r\n      };\r\n\r\n      // need to initialize the interceptors in the constructor before the children are mounted and reach out to the web\r\n      this.requestInterceptor = axiosOrders.interceptors.request.use(req => {\r\n        // console.log('====================================');\r\n        // console.log('[withErrorHandler.js] request intercepted');\r\n        // console.log('====================================');\r\n        this.setState({ error: null });\r\n        return req;\r\n      });\r\n      this.responseInterceptor = axiosOrders.interceptors.response.use(\r\n        res => {\r\n          // console.log('====================================');\r\n          // console.log('[withErrorHandler.js] response intercepted');\r\n          // console.log('====================================');\r\n          return res;\r\n        },\r\n        error => {\r\n          // console.log('====================================');\r\n          // console.log('[withErrorHandler.js] error registered');\r\n          // console.log('====================================');\r\n          this.setState({ error: error });\r\n        },\r\n      );\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      // this allows for reuse of this HOC\r\n      axiosOrders.interceptors.request.eject(this.requestInterceptor);\r\n      axiosOrders.interceptors.response.eject(this.responseInterceptor);\r\n    }\r\n\r\n    errorConfirmedHandler = () => {\r\n      this.setState({ error: null });\r\n    };\r\n\r\n    render() {\r\n      return (\r\n        <Hocaux>\r\n          <Modal\r\n            show={this.state.error !== null}\r\n            modalClosed={this.errorConfirmedHandler}>\r\n            {this.state.error ? this.state.error.message : null}\r\n          </Modal>\r\n          <WrappedComponent {...this.props} />\r\n        </Hocaux>\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\nexport default withErrorHandler;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal\":\"Modal_Modal__VYISq\"};"],"sourceRoot":""}